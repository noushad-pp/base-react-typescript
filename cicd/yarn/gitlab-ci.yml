# Generated automatically by generator-cicd-pipeline
# DO NOT EDIT MANUALLY

#stages:
#- vendors
#- build
#- test

yarn install:
  stage: vendors
  image: dcr.mfb.io/illuminati/node:latest
  artifacts:
    paths:
      - node_modules
    expire_in: 20m
  script:
    - make -f cicd/yarn/Makefile install
  tags:
    - docker
    - autoscaling
  except:
    - schedules

yarn build:
  stage: build
  image: dcr.mfb.io/illuminati/node:latest
  artifacts:
    paths:
      - build
    expire_in: 20m
  dependencies:
    - "yarn install"
  script:
    - make -f cicd/yarn/Makefile build
  tags:
    - docker
    - autoscaling
  except:
    - schedules

lint:
  image: dcr.mfb.io/illuminati/node:latest
  stage: test
  script:
    - make lint
  dependencies:
    - "yarn install"
  except:
    - schedules
  tags:
    - docker
    - autoscaling

tsc:
  image: dcr.mfb.io/illuminati/node:latest
  stage: test
  script:
    - make tsc
  dependencies:
    - "yarn install"
  except:
    - schedules
  tags:
    - docker
    - autoscaling

test:
  image: dcr.mfb.io/illuminati/node:latest
  stage: test
  script:
    - make test
  dependencies:
    - "yarn install"
  tags:
    - docker
    - autoscaling
  except:
    - schedules
